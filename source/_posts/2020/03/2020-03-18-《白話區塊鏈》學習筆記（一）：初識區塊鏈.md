---
title: 《白話區塊鏈》學習筆記（一）：初識區塊鏈
permalink: 《白話區塊鏈》學習筆記（一）：初識區塊鏈
date: 2020-03-18 17:43:04
tags: ["區塊鏈"]
categories: ["區塊鏈", "《白話區塊鏈》學習筆記"]
---

## 前言

本文為《白話區塊鏈》一書的學習筆記。

## 概念

區塊鏈在本質上就是一種記帳方法，不是透過人來記帳，而是透過軟體，暫且簡稱為「區塊鏈用戶端」。一個個的區塊鏈用戶端軟體，它們在不同設備上運作，彼此之間獨立作業。通常我們把運作中的用戶端軟體稱為「節點」。

這些節點運作後，彼此之間會認識一下。就跟新聞轉發差不多，不需要依靠某一個人，大家就能互通訊息了。在區塊鏈軟體的結構中，這種相互通訊的功能稱為「網路路由」。

事實上，區塊鏈是一整套技術組合的代表。區塊鏈系統結構的基本組成為：區塊鏈帳本、共識機制、密碼演算法、網路路由和腳本系統。這些「零件」裝配在一起，組成一個區塊鏈軟體，運作後就稱之為一個節點，多個這樣的節點在不同的計算機設備上運作，就組成了一個網路。在這個網路中每個節點都是平等的，大家互相為對方提供服務，這種網路被稱為點對點的「對等網路」。

### 區塊鏈帳本

區塊鏈就是「區塊」加上「鏈」，所謂區塊就是指資料塊，每一個資料塊之間透過某個標誌連接，進而形成一條鏈。區塊資料在邏輯上分為區塊頭和區塊體，每個區塊頭中透過梅克爾根連結區塊中眾多的交易事務，而每個區塊之間經由區塊頭雜湊值串連起來。

### 共識機制

所謂共識，是指大家都達成一致的觀念。共識演算法其實就是一個規則，每個節點都按照這個規則去確認各自的資料。在區塊鏈系統中，存在著多種這樣的篩選方案，例如 Pow（Proof of Work，工作量證明）、PoS（Proof of Stake，權益證明）、DPos（Delegate Proof of Stake，委託權益證明）、PBFT（Practical Byzantine Fault Tolerance，實用拜占庭容錯演算法）等。

### 密碼演算法

在資料結構中，有一種變數叫指標，它是可以用來指向某個資料的位址。然而，區塊之間的連接，往往不是靠資料位址來做關聯的，而是以一種叫做雜湊值的資料來做關聯。它是透過密碼演算法中的雜湊演算法計算得出的。區塊鏈帳本對每個區塊都會計算出一個雜湊值，稱為區塊雜湊，並以區塊雜湊來串連區塊。除了整個區塊會被計算雜湊值外，區塊中包含的每一筆事務資料也會被計算出一個雜湊值，稱為「事物雜湊」，每一個事物雜湊都可以唯一地表示一個事務。

### 腳本系統

所謂腳本，就是指一組程式規則。在區塊鏈系統，有些系統中的程式規則是固定的，例如在比特幣系統只能進行比特幣的發送與接收，這個發送與接收的過程就是透過實作在比特幣中的一組腳本程式來完成的；而以太坊就是透過實作一套可以自訂功能的腳本系統，進而達成智慧合約的功能。腳本系統使得在區塊鏈中可以實作各式各樣的業務功能。

### 網路路由

在區塊鏈系統中，網路中的結點依靠彼此聯繫並傳播訊息，這個功能一般會定義成一種協定，稱為「節點發現協定」。網路路由可以說是區塊鏈系統中的觸角，經由大量的觸角將每個節點連入網路，形成一個功能強大的區塊鏈共識網路。

## 架構

### 區塊鏈 1.0 架構

這個階段的區塊鏈系統主要是用來實作數位貨幣。首先，透過競爭獲得區塊資料的打包權後，將記憶集區中的交易資料打包進區塊，並且廣播給其他節點；其次，接受系統對打包行為的數位貨幣獎勵，系統透過這種獎勵方式完成新增貨幣的發行。

### 區塊鏈 2.0 架構

代表產品是以太坊，與 1.0 架構相比，最大的特點就是支援智慧合約。在以太坊中，我們使用智慧合約開發工具開發合約程式，並且編譯為位元組碼，最終部署到以太坊的區塊鏈帳本中。部署後的智慧合約是運作在虛擬機上的，稱為「以太坊虛擬機」。正是透過智慧合約的實作，擴充區塊鏈系統的功能。

### 區塊鏈 3.0 架構

在 3.0 的架構中，超越了對數位貨幣或者金融的應用範圍，而將區塊鏈技術作為一種泛解決方案，可以廣用在極為廣泛的領域，例如行政管理、文化藝術、企業供應鏈、醫療健康、物聯網、產權登記等。與先前的架構相比，最大的特點就是增加了一個閘道控制，實際上即為增加對安全保密的需求支援，並且透過資料審計加強管理資料的可靠性。在 3.0 架構中可以看成是一套框架，對框架做不同的設定和二次開發，即可適應各行各業的需求。

## 分類

### 根據網路範圍

#### 公有鏈

所謂公有就是完全對外開放，任何人都可以任意使用，沒有權限的設定，也沒有身份認證之類，不但可以任意參與使用，而且發生的所有資料都可以任意查看，完全公開透明。比特幣就是一個公有鏈網路系統，在使用比特幣系統時，只需要下載相對應的軟體用戶端，建立錢包位址、轉帳交易、挖礦等操作，這些功能都能自由使用。

#### 私有鏈

私有就是指不對外開放，僅僅在組織內部使用的系統，例如企業的票據管理、帳務審計、供應鏈管理等，或者一些政務管理系統。私有鏈在使用過程中，通常是會要求註冊，也就是需要提交身份認證，而且具備一套權限管理體系。在私有環境中，節點數量和節點的狀態通常是可控的，因此在私有鏈環境中，一般不需要透過競爭的方式來篩選區塊資料的打包者，可以採用更加節能環保的方式，例如上述提到的 PoS 或 PBFT 等。

#### 聯盟鏈

聯盟鏈的網路範圍介於公有鏈和私有鏈之間，通常使用在多個成員角色的環境中，例如銀行之間的支付結算、企業之間的物流等，這些情境下往往都是由不同權限的成員參與。與私有鏈一樣，聯盟鏈系統一般也是具有身份認證和權限設定的，而且節點的數量往往也是確定的，對於企業或者機構之間的事務處理很合適。聯盟鏈不一定要完全管控，例如政務系統，有些可以對外公開的資料，就可以部分開放。

### 根據部署環境

#### 主鏈

主鏈就是部署在生產環境的真正的區塊鏈系統。

#### 測試鏈

測試鏈就是為了方便大家學習使用而提供的測試用途之區塊鏈網路，例如比特幣測試鏈、以太坊測試鏈等。

### 根據對接類型

#### 單鏈

能夠單獨運作的區塊鏈系統都可以稱為「單鏈」，例如比特幣主鏈、測試鏈；以太坊主鏈、測試鏈。

#### 側鏈

側鏈屬於一種區塊鏈系統的跨鏈系統，這個概念主要由比特幣側鏈發起的。簡單來說，側鏈是以錨定比特幣為基礎的新型區塊鏈。錨定比特幣的側鏈，目前有 CosenSys 的 BTRelay、Rootstock 和 BlockStream 的元素鏈等。區塊鏈系統與側鏈系統都是一個獨立的鏈系統，兩者之間可以按照一定的協定進行資料互動，透過這種方式，側鏈能發揮一個對主鏈功能擴充的作用，很多在主鏈中不方便實作的功能可以實作在側鏈中，而側鏈再與主鏈的資料互動，增強自己的可靠性。

#### 互聯鏈

如果說每一條鏈都是一條神經的話，一旦互聯，就會像是神經系統一般，為我們的社會發展帶來更新層次的智慧化。從技術角度來講，區塊鏈系統之間的互聯，可以彼此互補。每一類系統都會有長處和不足之處，彼此進行功能上的互補，甚至可以彼此進行互相的驗證，可以大大加強系統的可靠性及效能。

## 技術意義

1. 資料不可竄改姓

區塊鍊系統不是一個中心化的軟體設施，而是一個 P2P 的對等網路結構軟體，資料是每個節點各自儲存一份。不但如此，因為區塊之間是靠區塊雜湊連接起來的，更改某個區塊的資料後，後續的區塊就都要更改，因此想要竄改更顯困難。

2. 分散式儲存

在區塊鍊系統中，每個運作的節點都擁有一份完整的資料副本，這樣的設計不但使資料儲存避免了單故障點的問題，還可以讓每個節點能夠獨立地驗證和檢索資料。節點之間的資料副本還可以互相保持同步，並使用類似梅克爾樹這樣的技術結構保證資料的完整性和一致性。

3. 匿名性

區塊鍊系統中，幾乎所有的區塊鍊產品都是使用所謂的位址來標識使用者，位址通常是透過公開密鑰演算法生成的公鑰轉換而來，這通常就是一串如亂碼一般的字串。因此，雖然比特幣、以太坊等這些公鍊系統的資料是完全公開透明的，可是我們卻不知道背後的操作者是誰。

4. 價值傳遞

所謂價值，泛指各種資產，例如貨幣資產、信用資產、版權資產以及各種實物資產（如黃金等），所有這些資產在本質上其實都是一種信用或者信任。在這些價值資產的轉移過程中，都需要信用的保證。在比特幣的網路中，自己可以根據規則發行比特幣，並能確保發行的比特幣是具有價值的（工作量證明），而這種價值透過所有節點進行認證。因此，區塊鍊系統可以自己創造信任機制，簡化各種資產交易的過程，降低交易成本。

5. 自動網路共識

以比特幣的例子，從發行到轉帳交易，都是由網路中的節點自動進行身分認證和一系列的檢查，檢查後達成網路共識，一筆交易就算是確定了。各種商業或金融活動，都可以透過區塊鍊上的智慧合約來達成。

6. 可程式化合約

可程式化合約，也就是智慧合約的意思。在比特幣系統中，並不是像銀行帳戶一樣，將金額儲存在某個帳戶下就表示一筆資產是某個帳戶擁有的，而是使用一種腳本程式，利用腳本程式解鎖（解鎖腳本）和鎖定（鎖定腳本）一筆資產。簡單地說，就是讓資產具備更強的程式化控制能力，透過程式設定對資產的管理方式。這種可設定、可控制的思維就是可程式化合約的思想。

## 參考資料

- 蔣勇、文延、嘉文（2018）。白話區塊鏈。台北市：碁峯資訊。
