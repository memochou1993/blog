---
title: ã€ŒThe Rust Programming Languageã€å­¸ç¿’ç­†è¨˜ï¼ˆä¸‰ï¼‰ï¼šåŸºç¤èªæ³•
permalink: ã€ŒThe-Rust-Programming-Languageã€å­¸ç¿’ç­†è¨˜ï¼ˆä¸‰ï¼‰ï¼šåŸºç¤èªæ³•
date: 2022-04-19 21:09:25
tags: ["ç¨‹å¼è¨­è¨ˆ", "Rust"]
categories: ["ç¨‹å¼è¨­è¨ˆ", "Rust", "ã€ŒThe Rust Programming Languageã€å­¸ç¿’ç­†è¨˜"]
---

## å‰è¨€

æœ¬æ–‡ç‚ºã€Œ[The Rust Programming Language](https://doc.rust-lang.org/stable/book/)ã€èªè¨€æŒ‡å—çš„å­¸ç¿’ç­†è¨˜ã€‚

## è®Šæ•¸èˆ‡å¯è®Šæ€§

### è®Šæ•¸

åŸ·è¡Œä»¥ä¸‹ç¨‹å¼ï¼Œæœƒæ”¶åˆ°ä¸€å‰‡éŒ¯èª¤è¨Šæ¯ã€‚

```RS
fn main() {
    let x = 5;
    println!("x çš„æ•¸å€¼ç‚ºï¼š{}", x);
    x = 6;
    println!("x çš„æ•¸å€¼ç‚ºï¼š{}", x);
}
```

å¯ä»¥åœ¨è®Šæ•¸åç¨±å‰é¢åŠ ä¸Š `mut` è®“å®ƒå€‘å¯ä»¥æˆç‚ºå¯è®Šçš„ï¼ŒåŠ ä¸Š `mut` ä¹Ÿå‘æœªä¾†çš„è®€å–è€…è¡¨æ˜äº†å…¶ä»–éƒ¨åˆ†çš„ç¨‹å¼ç¢¼å°‡æœƒæ”¹è®Šæ­¤è®Šæ•¸çš„æ•¸å€¼ã€‚

```RS
fn main() {
    let mut x = 5;
    println!("x çš„æ•¸å€¼ç‚ºï¼š{}", x);
    x = 6;
    println!("x çš„æ•¸å€¼ç‚ºï¼š{}", x);
}
```

åŸ·è¡Œå¾Œï¼Œæœƒå¾—åˆ°ä»¥ä¸‹è¨Šæ¯ã€‚

```RS
cargo run
   Compiling hello_cargo v0.1.0 (/Users/memochou/Projects/hello_cargo)
    Finished dev [unoptimized + debuginfo] target(s) in 0.93s
     Running `target/debug/hello_cargo`
x çš„æ•¸å€¼ç‚ºï¼š5
x çš„æ•¸å€¼ç‚ºï¼š6
```

### å¸¸æ•¸

å¸¸æ•¸ï¼ˆconstantsï¼‰å’Œä¸å¯è®Šè®Šæ•¸ä¸€æ¨£ï¼Œå¸¸æ•¸æœƒè®“æ•¸å€¼èˆ‡åç¨±ç¶å®šä¸”ä¸å…è¨±è¢«æ”¹è®Šï¼Œä½†æ˜¯ä¸å¯è®Šè®Šæ•¸èˆ‡å¸¸æ•¸é‚„æ˜¯æœ‰äº›å·®ç•°ã€‚

å¸¸æ•¸å¯ä»¥è¢«å®šç¾©åœ¨ä»»ä¸€æœ‰æ•ˆç¯„åœï¼ŒåŒ…å«å…¨åŸŸæœ‰æ•ˆç¯„åœã€‚é€™è®“å®ƒå€‘éå¸¸æœ‰ç”¨ï¼Œè®“è¨±å¤šéƒ¨åˆ†çš„ç¨‹å¼ç¢¼éƒ½èƒ½å¤ çŸ¥é“å®ƒå€‘ã€‚

æœ€å¾Œä¸€å€‹å·®åˆ¥æ˜¯å¸¸æ•¸åªèƒ½è¢«å¸¸æ•¸è¡¨é”å¼è¨­ç½®ï¼Œä¸èƒ½ç”¨ä»»ä¸€åœ¨é‹è¡Œæ™‚ç”¢ç”Ÿçš„å…¶ä»–æ•¸å€¼è¨­ç½®ã€‚

```RS
const THREE_HOURS_IN_SECONDS: u32 = 60 * 60 * 3;
```

Rust çš„å¸¸æ•¸å‘½åè¦å‰‡ç‚ºä½¿ç”¨å…¨éƒ¨è‹±æ–‡å¤§å¯«ä¸¦ç”¨åº•å¯«å€éš”æ¯å€‹å–®å­—ã€‚

### é®è”½ï¼ˆShadowingï¼‰

æˆ‘å€‘å¯ä»¥ç”¨ `let` é—œéµå­—ä¾†é‡è¤‡å®£å‘Šç›¸åŒçš„è®Šæ•¸åç¨±ä¾†é®è”½ä¸€å€‹è®Šæ•¸ã€‚

```RS
fn main() {
    let x = 5;

    let x = x + 1;

    {
        let x = x * 2;
        println!("x åœ¨å…§éƒ¨ç¯„åœçš„æ•¸å€¼ç‚ºï¼š{}", x);
    }

    println!("x çš„æ•¸å€¼ç‚ºï¼š{}", x);
}
```

åŸ·è¡Œå¾Œï¼Œæœƒå¾—åˆ°ä»¥ä¸‹è¨Šæ¯ã€‚

```BASH
cargo run
   Compiling variables v0.1.0 (file:///projects/variables)
    Finished dev [unoptimized + debuginfo] target(s) in 0.31s
     Running `target/debug/variables`
x åœ¨å…§éƒ¨ç¯„åœçš„æ•¸å€¼ç‚ºï¼š12
x çš„æ•¸å€¼ç‚ºï¼š6
```

é®è”½èˆ‡æ¨™è¨˜è®Šæ•¸ç‚º `mut` æ˜¯ä¸ä¸€æ¨£çš„ï¼Œå› ç‚ºå¦‚æœæˆ‘å€‘ä¸å°å¿ƒé‡æ–°è³¦å€¼è€Œæ²’æœ‰åŠ ä¸Š `let` é—œéµå­—çš„è©±ï¼Œæ˜¯æœƒç”¢ç”Ÿç·¨è­¯æœŸéŒ¯èª¤çš„ã€‚ä½¿ç”¨ `let` çš„è©±ï¼Œæˆ‘å€‘å¯ä»¥ä½œå‡ºä¸€äº›æ”¹è®Šï¼Œç„¶å¾Œåœ¨é€™ä¹‹å¾Œè©²è®Šæ•¸ä»ç„¶æ˜¯ä¸å¯è®Šçš„ã€‚

å¦ä¸€å€‹ `mut` èˆ‡é®è”½ä¸åŒçš„åœ°æ–¹æ˜¯ï¼Œæˆ‘å€‘èƒ½æœ‰æ•ˆåœ°å†æ¬¡é‹ç”¨ `let` ç”¢ç”Ÿæ–°çš„è®Šæ•¸ï¼Œå¯ä»¥åœ¨é‡æ–°é‹ç”¨ç›¸åŒåç¨±æ™‚æ”¹è®Šå®ƒçš„å‹åˆ¥ã€‚

```RS
let spaces = "   ";
let spaces = spaces.len();
```

ä¸éï¼Œå¯è®Šè®Šæ•¸ä»ç„¶æ˜¯ç„¡æ³•è®Šæ›´è®Šæ•¸å‹åˆ¥çš„ï¼Œå¦‚æœé€™æ¨£åšçš„è©±æˆ‘å€‘å°±æœƒæ‹¿åˆ°ç·¨è­¯æœŸéŒ¯èª¤ã€‚

```RS
let mut spaces = "   ";
spaces = spaces.len();
```

åŸ·è¡Œå¾Œï¼Œæœƒå¾—åˆ°ä»¥ä¸‹è¨Šæ¯ã€‚

```BASH
cargo run
   Compiling hello_cargo v0.1.0 (/Users/memochou/Projects/hello_cargo)
error[E0308]: mismatched types
 --> src/main.rs:3:14
  |
2 |     let mut spaces = "   ";
  |                      ----- expected due to this value
3 |     spaces = spaces.len();
  |              ^^^^^^^^^^^^ expected `&str`, found `usize`
```

## è³‡æ–™å‹åˆ¥

### æ•´æ•¸å‹åˆ¥

æ•´æ•¸æ˜¯æ²’æœ‰å°æ•¸é»çš„æ•¸å­—ã€‚åœ¨ç¬¬äºŒç« ç”¨åˆ°äº†ä¸€å€‹æ•´æ•¸å‹åˆ¥ `u32`ï¼Œæ­¤å‹åˆ¥è¡¨ç¤ºå…¶æ“æœ‰çš„æ•¸å€¼æ‡‰è©²æ˜¯ä¸€å€‹ä½” 32 ä½å…ƒå¤§å°çš„éå¸¶è™Ÿæ•´æ•¸ï¼ˆå¸¶è™Ÿæ•´æ•¸çš„è©±å‰‡æ˜¯ç”¨ `i` èµ·é ­è€Œé `u`ï¼‰ã€‚

æ¯ä¸€å¸¶è™Ÿè®Šé«”å¯ä»¥å„²å­˜çš„æ•¸å­—ç¯„åœåŒ…å«å¾ `-(2^n - 1)` åˆ° `2^n - 1 - 1` ä»¥å…§çš„æ•¸å­—ï¼Œ`n` å°±æ˜¯è©²è®Šé«”ä½”ç”¨çš„ä½å…ƒå¤§å°ã€‚æ‰€ä»¥ä¸€å€‹ `i8` å¯ä»¥å„²å­˜çš„æ•¸å­—ç¯„åœå°±æ˜¯å¾ `-(2^7)` åˆ° `2^7 - 1`ï¼Œä¹Ÿå°±æ˜¯ -128 åˆ° 127ã€‚è€Œéå¸¶è™Ÿå¯ä»¥å„²å­˜çš„æ•¸å­—ç¯„åœå‰‡æ˜¯å¾ `0` åˆ° `2^n - 1`ï¼Œæ‰€ä»¥ `u8` å¯ä»¥å„²å­˜çš„ç¯„åœæ˜¯å¾ `0` åˆ° `2^8 - 1`ï¼Œä¹Ÿå°±æ˜¯ 0 åˆ° 255ã€‚

### æµ®é»æ•¸å‹åˆ¥

Rust é‚„æœ‰é‡å°æœ‰å°æ•¸é»çš„æµ®é»æ•¸æä¾›å…©ç¨®åŸºæœ¬å‹åˆ¥ï¼š`f32` å’Œ `f64`ï¼Œåˆ†åˆ¥ä½”æœ‰ 32 ä½å…ƒèˆ‡ 64 ä½å…ƒçš„å¤§å°ã€‚è€Œé è¨­çš„å‹åˆ¥ç‚º `f64`ï¼Œå› ç‚ºç¾ä»£çš„é›»è…¦è™•ç†çš„é€Ÿåº¦å¹¾ä¹å’Œ `f32` ä¸€æ¨£å»é‚„èƒ½æ“æœ‰æ›´é«˜çš„ç²¾æº–åº¦ã€‚æ‰€æœ‰çš„æµ®é»æ•¸å‹åˆ¥éƒ½æ˜¯å¸¶è™Ÿçš„ï¼ˆsignedï¼‰ã€‚

```RS
fn main() {
    let x = 2.0; // f64

    let y: f32 = 3.0; // f32
}
```

### æ•¸å€¼é‹ç®—

Rust æ”¯æ´æ‰€æœ‰æƒ³å¾—åˆ°çš„æ•¸å€¼å‹åˆ¥åŸºæœ¬é‹ç®—ï¼šåŠ æ³•ã€æ¸›æ³•ã€ä¹˜æ³•ã€é™¤æ³•å’Œå–é¤˜ã€‚æ•´æ•¸é™¤æ³•æœƒå–æœ€æ¥é€²çš„ä¸‹ç•Œæ•¸å€¼ã€‚

```RS
fn main() {
    // åŠ æ³•
    let sum = 5 + 10;

    // æ¸›æ³•
    let difference = 95.5 - 4.3;

    // ä¹˜æ³•
    let product = 4 * 30;

    // é™¤æ³•
    let quotient = 56.7 / 32.2;
    let floored = 2 / 3; // çµæœçˆ² 0

    // å–é¤˜
    let remainder = 43 % 5;
}
```

### å¸ƒæ—å‹åˆ¥

Rust ä¸­çš„å¸ƒæ—å‹åˆ¥æœ‰å…©å€‹å¯èƒ½çš„å€¼ï¼š`true` å’Œ `false`ã€‚å¸ƒæ—å€¼çš„å¤§å°ç‚ºä¸€å€‹ä½å…ƒçµ„ã€‚

```RS
fn main() {
    let t = true;

    let f: bool = false; // å‹åˆ¥è©®é‡‹çš„æ–¹å¼
}
```

### å­—å…ƒå‹åˆ¥

Rust çš„ char å‹åˆ¥æ˜¯æœ€åŸºæœ¬çš„å­—æ¯å‹åˆ¥ã€‚

```RS
fn main() {
    let c = 'z';
    let z = 'â„¤';
    let heart_eyed_cat = 'ğŸ˜»';
}
```

æ³¨æ„åˆ° `char` å­—é¢å€¼æ˜¯ç”¨å–®å¼•è™Ÿè³¦å€¼ï¼Œå®£å‘Šå­—ä¸²å­—é¢å€¼æ™‚æ‰æ˜¯ç”¨é›™å¼•è™Ÿã€‚Rust çš„ `char` å‹åˆ¥å¤§å°ç‚ºå››å€‹ä½å…ƒçµ„ä¸¦è¡¨ç¤ºç‚ºä¸€å€‹ Unicode ç´”é‡æ•¸å€¼ï¼Œé€™ä»£è¡¨å®ƒèƒ½æ“æœ‰çš„å­—å…ƒæ¯” ASCII é‚„ä¾†çš„å¤šã€‚èˆ‰å‡¡æ¨™éŸ³å­—æ¯ï¼ˆAccented lettersï¼‰ã€ä¸­æ–‡ã€æ—¥æ–‡ã€éŸ“æ–‡ã€è¡¨æƒ…ç¬¦è™Ÿä»¥åŠé›¶é•·åº¦ç©ºæ ¼éƒ½æ˜¯ `char` çš„æœ‰æ•ˆå­—å…ƒã€‚

### å…ƒçµ„å‹åˆ¥

å…ƒçµ„æ˜¯å€‹å°‡è¨±å¤šä¸åŒå‹åˆ¥çš„æ•¸å€¼åˆæˆä¸€å€‹è¤‡åˆå‹åˆ¥çš„å¸¸è¦‹æ–¹æ³•ã€‚å…ƒçµ„æ“æœ‰å›ºå®šé•·åº¦ï¼šä¸€æ—¦å®£å‘Šå¥½å¾Œï¼Œå®ƒå€‘å°±ç„¡æ³•å¢é•·æˆ–ç¸®æ¸›ã€‚

å»ºç«‹ä¸€å€‹å…ƒçµ„çš„æ–¹æ³•æ˜¯å¯«ä¸€å€‹ç”¨æ‹¬è™Ÿå›Šæ‹¬èµ·ä¾†çš„æ•¸å€¼åˆ—è¡¨ï¼Œæ¯å€‹å€¼å†ç”¨é€—è™Ÿåˆ†éš”é–‹ä¾†ã€‚å…ƒçµ„çš„æ¯ä¸€æ ¼éƒ½æ˜¯ä¸€å€‹ç¨ç«‹å‹åˆ¥ï¼Œä¸åŒæ•¸å€¼ä¸å¿…æ˜¯ç›¸åŒå‹åˆ¥ã€‚

```RS
fn main() {
    let tup: (i32, f64, u8) = (500, 6.4, 1);
}
```

æ­¤è®Šæ•¸ `tup` å°±æ˜¯æ•´å€‹å…ƒçµ„ï¼Œå› ç‚ºä¸€å€‹å…ƒçµ„å°±è¢«è¦–ç‚ºå–®ä¸€è¤‡åˆå…ƒç´ ã€‚è¦æ‹¿åˆ°å…ƒçµ„ä¸­çš„æ¯å€‹ç¨ç«‹æ•¸å€¼çš„è©±ï¼Œæˆ‘å€‘å¯ä»¥ç”¨æ¨¡å¼é…å°ï¼ˆpattern matchingï¼‰ä¾†è§£æ§‹ä¸€å€‹å…ƒçµ„çš„æ•¸å€¼ã€‚

```RS
fn main() {
    let tup = (500, 6.4, 1);

    let (x, y, z) = tup;

    println!("y çš„æ•¸å€¼ç‚ºï¼š{}", y);
}
```

ä¹Ÿå¯ä»¥ç›´æ¥ç”¨å¥è™Ÿï¼ˆ`.`ï¼‰å†åŠ ä¸Šæ•¸å€¼çš„ç´¢å¼•ä¾†å–å¾—å…ƒçµ„å…§çš„å…ƒç´ ã€‚

```RS
fn main() {
    let x: (i32, f64, u8) = (500, 6.4, 1);

    let five_hundred = x.0;

    let six_point_four = x.1;

    let one = x.2;
}
```

å’Œå¤šæ•¸ç¨‹å¼èªè¨€ä¸€æ¨£ï¼Œå…ƒçµ„çš„ç¬¬ä¸€å€‹ç´¢å¼•æ˜¯ 0ã€‚

æ²’æœ‰ä»»ä½•æ•¸å€¼çš„å…ƒçµ„ `()` æœƒæ˜¯å€‹åªæœ‰ä¸€ç¨®æ•¸å€¼çš„ç‰¹æ®Šå‹åˆ¥ï¼Œå…¶å€¼ä¹Ÿå¯«ä½œ `()`ã€‚æ­¤å‹åˆ¥ç¨±çˆ²ã€Œå–®å…ƒå‹åˆ¥ã€è€Œå…¶æ•¸å€¼ç¨±çˆ²ã€Œå–®å…ƒæ•¸å€¼ã€ã€‚

### é™£åˆ—å‹åˆ¥

å’Œå…ƒçµ„ä¸ä¸€æ¨£çš„æ˜¯ï¼Œé™£åˆ—ä¸­çš„æ¯å€‹å‹åˆ¥å¿…é ˆæ˜¯ä¸€æ¨£çš„ã€‚å’Œå…¶ä»–èªè¨€çš„é™£åˆ—ä¸åŒï¼ŒRust çš„é™£åˆ—æ˜¯å›ºå®šé•·åº¦çš„ã€‚

```RS
fn main() {
    let a = [1, 2, 3, 4, 5];
}
```

å¦‚æœå¸Œæœ›è³‡æ–™è¢«åˆ†é…åœ¨å †ç–Šï¼ˆstackï¼‰è€Œä¸æ˜¯å †ç©ï¼ˆheapï¼‰çš„è©±ï¼Œä½¿ç”¨é™£åˆ—æ˜¯å¾ˆå¥½çš„é¸æ“‡ï¼ˆåœ¨ç¬¬å››ç« æœƒè¨è«–å †ç–Šèˆ‡å †ç©çš„å…§å®¹ï¼‰ã€‚

å¦‚æœçŸ¥é“å…ƒç´ çš„å¤šå¯¡ä¸æœƒè®Šçš„è©±ï¼Œé™£åˆ—å°±æ˜¯å€‹ä¸éŒ¯çš„é¸æ“‡ã€‚

```RS
let months = ["ä¸€æœˆ", "äºŒæœˆ", "ä¸‰æœˆ", "å››æœˆ", "äº”æœˆ", "å…­æœˆ", "ä¸ƒæœˆ",
              "å…«æœˆ", "ä¹æœˆ", "åæœˆ", "åä¸€æœˆ", "åäºŒæœˆ"];
```

è¦è©®é‡‹é™£åˆ—å‹åˆ¥çš„è©±ï¼Œå¯ä»¥åœ¨ä¸­æ‹¬è™Ÿå¯«å‡ºå‹åˆ¥å’Œå…ƒç´ å€‹æ•¸ï¼Œä¸¦ç”¨åˆ†è™Ÿå€éš”é–‹ä¾†ã€‚

```RS
let a: [i32; 5] = [1, 2, 3, 4, 5];
```

å¦‚æœæƒ³å»ºç«‹çš„é™£åˆ—ä¸­æ¯å€‹å…ƒç´ æ•¸å€¼éƒ½ä¸€æ¨£çš„è©±ï¼Œå¯ä»¥æŒ‡å®šä¸€å€‹æ•¸å€¼å¾ŒåŠ ä¸Šåˆ†è™Ÿï¼Œæœ€å¾Œå¯«å‡ºå…ƒç´ å€‹æ•¸ã€‚

```RS
let a = [3; 5]; // å’Œ let a = [3, 3, 3, 3, 3]; ä¸€æ¨£
```

ä¸€å€‹é™£åˆ—æ˜¯è¢«åˆ†é…åœ¨å †ç–Šä¸Šä¸”å·²çŸ¥å›ºå®šå¤§å°çš„ä¸€æ•´å¡Šè¨˜æ†¶é«”ï¼Œå¯ä»¥ä½¿ç”¨ç´¢å¼•ä¾†å–å¾—é™£åˆ—çš„å…ƒç´ ã€‚

```RS
fn main() {
    let a = [1, 2, 3, 4, 5];

    let first = a[0];
    let second = a[1];
}
```

## å‡½å¼

Rust ç¨‹å¼ç¢¼ä½¿ç”¨ snake case å¼ä½œç‚ºå‡½å¼èˆ‡è®Šæ•¸åç¨±çš„æ…£ä¾‹é¢¨æ ¼ã€‚æ‰€æœ‰çš„å­—æ¯éƒ½æ˜¯å°å¯«ï¼Œä¸¦ç”¨åº•ç·šå€éš”å–®å­—ã€‚

```RS
fn main() {
    println!("Hello, world!");

    another_function();
}

fn another_function() {
    println!("å¦ä¸€æ”¯å‡½å¼ã€‚");
}
```

### åƒæ•¸

å¯ä»¥å®šç¾©å‡½å¼æˆæ“æœ‰åƒæ•¸ï¼ˆparametersï¼‰çš„ï¼Œé€™æ˜¯å‡½å¼ç°½åï¼ˆsignaturesï¼‰ä¸­ç‰¹æ®Šçš„è®Šæ•¸ã€‚ç•¶å‡½å¼æœ‰åƒæ•¸æ™‚ï¼Œå¯ä»¥æä¾›é‚£äº›åƒæ•¸çš„ç¢ºåˆ‡æ•¸å€¼ã€‚åš´æ ¼ä¸Šä¾†èªªï¼Œå‚³éçš„æ•¸å€¼æœƒå«åšå¼•æ•¸ï¼ˆargumentsï¼‰ã€‚

```RS
fn main() {
    another_function(5);
}

fn another_function(x: i32) {
    println!("x çš„æ•¸å€¼ç‚ºï¼š{}", x);
}
```

### é™³è¿°å¼èˆ‡è¡¨é”å¼

å‡½å¼æœ¬é«”æ˜¯ç”±ä¸€ç³»åˆ—çš„é™³è¿°å¼ï¼ˆstatementsï¼‰ä¸¦åœ¨æœ€å¾Œå¯ä»¥é¸æ“‡åŠ ä¸Šè¡¨é”å¼ï¼ˆexpressionï¼‰ä¾†çµ„æˆã€‚Rust æ˜¯é–€åŸºæ–¼è¡¨é”å¼ï¼ˆexpression-basedï¼‰çš„èªè¨€ã€‚é™³è¿°å¼ï¼ˆstatementsï¼‰æ˜¯é€²è¡Œä¸€äº›å‹•ä½œçš„æŒ‡ä»¤ï¼Œä¸”ä¸å›å‚³ä»»ä½•æ•¸å€¼ã€‚è¡¨é”å¼ï¼ˆexpressionsï¼‰å‰‡æ˜¯è¨ˆç®—ä¸¦ç”¢ç”Ÿæ•¸å€¼ã€‚

```RS
fn main() {
    let x = 5;

    let y = {
        let x = 3;
        x + 1
    };

    println!("y çš„æ•¸å€¼ç‚ºï¼š{}", y);
}
```

æ³¨æ„åˆ° `x + 1` é€™è¡Œæ²’æœ‰åŠ ä¸Šåˆ†è™Ÿï¼Œå› ç‚ºè¡¨é”å¼çµå°¾ä¸æœƒåŠ ä¸Šåˆ†è™Ÿã€‚å¦‚æœåœ¨æ­¤è¡¨é”å¼åŠ ä¸Šåˆ†è™Ÿçš„è©±ï¼Œå®ƒå°±ä¸æœƒå›å‚³æ•¸å€¼ã€‚

### å‡½å¼å›å‚³å€¼

å‡½å¼å¯ä»¥å›å‚³æ•¸å€¼çµ¦å‘¼å«å®ƒå€‘çš„ç¨‹å¼ç¢¼ï¼Œæˆ‘å€‘ä¸æœƒç‚ºå›å‚³å€¼å‘½åï¼Œä½†æˆ‘å€‘å¿…é ˆç”¨ç®­é ­ï¼ˆ`->`ï¼‰ä¾†å®£å‘Šå®ƒå€‘çš„å‹åˆ¥ã€‚åœ¨ Rust ä¸­ï¼Œå›å‚³å€¼å…¶å¯¦å°±æ˜¯å‡½å¼æœ¬é«”æœ€å¾Œä¸€è¡Œçš„è¡¨é”å¼ã€‚å¯ä»¥ç”¨ return é—œéµå­—åŠ ä¸Šä¸€å€‹æ•¸å€¼ä¾†ææ—©å›å‚³å‡½å¼ï¼Œä½†å¤šæ•¸å‡½å¼éƒ½èƒ½ç”¨æœ€å¾Œä¸€è¡Œçš„è¡¨é”å¼ä½œç‚ºæ•¸å€¼å›å‚³ã€‚

```RS
fn five() -> i32 {
    5
}

fn main() {
    let x = five();

    println!("x çš„æ•¸å€¼ç‚ºï¼š{}", x);
}
```

## è¨»è§£

é€™æ˜¯ä¸€å€‹ç°¡å–®çš„è¨»è§£ã€‚

```RS
// å®‰å®‰ï¼Œä½ å¥½
```

ç¶“å¸¸çœ‹åˆ°ä»¥ä¸‹æ ¼å¼ï¼Œè¨»è§£æœƒä½æ–¼è¦èªªæ˜çš„ç¨‹å¼ç¢¼ä¸Šä¸€è¡Œã€‚

```RS
fn main() {
    // å¹¸é‹ 777ï¼
    let lucky_number = 7;
}
```

## æ§åˆ¶æµç¨‹

### if è¡¨é”å¼

`if` èƒ½ä¾ç…§æ¢ä»¶åˆ¤æ–·å°ç¨‹å¼ç¢¼ç”¢ç”Ÿåˆ†æ”¯ã€‚

```RS
fn main() {
    let number = 3;

    if number < 5 {
        println!("æ¢ä»¶ç‚ºçœŸ");
    } else {
        println!("æ¢ä»¶ç‚ºå¦");
    }
}
```

å€¼å¾—æ³¨æ„çš„æ˜¯ç¨‹å¼ç¢¼çš„æ¢ä»¶åˆ¤æ–·å¿…é ˆæ˜¯ `bool`ã€‚å¦‚æœæ¢ä»¶ä¸æ˜¯ `bool` çš„è©±ï¼Œæˆ‘å€‘å°±æœƒé‡åˆ°éŒ¯èª¤ã€‚

### else if è¡¨é”å¼

æƒ³è¦å¯¦ç¾å¤šé‡æ¢ä»¶çš„è©±ï¼Œå¯ä»¥å°‡ `if` å’Œ `else` çµ„åˆæˆ `else if` è¡¨é”å¼ã€‚

```RS
fn main() {
    let number = 6;

    if number % 4 == 0 {
        println!("æ•¸å­—å¯ä»¥è¢« 4 æ•´é™¤");
    } else if number % 3 == 0 {
        println!("æ•¸å­—å¯ä»¥è¢« 3 æ•´é™¤");
    } else if number % 2 == 0 {
        println!("æ•¸å­—å¯ä»¥è¢« 2 æ•´é™¤");
    } else {
        println!("æ•¸å­—ç„¡æ³•è¢« 4ã€3ã€2 æ•´é™¤");
    }
}
```

### åœ¨ let é™³è¿°å¼ä¸­ä½¿ç”¨ if è¡¨é”å¼

å› ç‚º `if` æ˜¯è¡¨é”å¼ï¼Œæ‰€ä»¥å¯ä»¥åƒé€™æ¨£æ”¾åœ¨ `let` é™³è¿°å¼çš„å³é‚Šï¼Œå°‡çµæœè³¦å€¼çµ¦è®Šæ•¸ã€‚

```RS
fn main() {
    let condition = true;
    let number = if condition { 5 } else { 6 };

    println!("æ•¸å­—çµæœç‚ºï¼š{}", number);
}
```

### ä½¿ç”¨è¿´åœˆé‡è¤‡åŸ·è¡Œ

#### ä½¿ç”¨ loop é‡è¤‡åŸ·è¡Œç¨‹å¼ç¢¼

`loop` é—œéµå­—å‘Šè¨´ Rust å»åè¦†ä¸åœåœ°åŸ·è¡Œä¸€æ®µç¨‹å¼ç¢¼ç›´åˆ°ä½ è¦ªè‡ªå‘Šè¨´å®ƒè¦åœä¸‹ä¾†ã€‚

```RS
fn main() {
    loop {
        println!("å†ä¸€æ¬¡ï¼");
    }
}
```

å¦‚æœæœ‰è¿´åœˆåœ¨è¿´åœˆä¹‹å…§çš„è©±ï¼Œ`break` å’Œ `continue` æœƒç”¨åœ¨è©²ä½ç½®æœ€å…§å±¤çš„è¿´åœˆä¸­ã€‚å¯ä»¥é¸æ“‡åœ¨è¿´åœˆä½¿ç”¨ã€Œè¿´åœˆæ¨™ç±¤ã€ï¼ˆloop labelï¼‰ï¼Œç„¶å¾Œä½¿ç”¨ `break` å’Œ `continue` åŠ ä¸Šé‚£äº›è¿´åœˆæ¨™ç±¤å®šç¾©çš„é—œéµå­—ï¼Œè€Œä¸æ˜¯ä½œç”¨åœ¨æœ€å…§å±¤è¿´åœˆè€Œå·²ã€‚

```RS
fn main() {
    let mut count = 0;
    'counting_up: loop {
        println!("count = {}", count);
        let mut remaining = 10;

        loop {
            println!("remaining = {}", remaining);
            if remaining == 9 {
                break;
            }
            if count == 2 {
                break 'counting_up;
            }
            remaining -= 1;
        }

        count += 1;
    }
    println!("End count = {}", count);
}
```

å…¶ä¸­ä¸€ç¨®ä½¿ç”¨ `loop` çš„ç”¨é€”æ˜¯é‡è©¦æŸäº›å¯èƒ½è¦ºå¾—æœƒå¤±æ•—çš„å‹•ä½œï¼Œåƒæ˜¯æª¢æŸ¥ä¸€å€‹åŸ·è¡Œç·’æ˜¯å¦å·²ç¶“å®Œæˆå…¶ä»»å‹™ã€‚é€™æ¨£å¯èƒ½å°±æœƒæƒ³å‚³éä»»å‹™çµæœçµ¦ä¹‹å¾Œçš„ç¨‹å¼ç¢¼ã€‚

```RS
fn main() {
    let mut counter = 0;

    let result = loop {
        counter += 1;

        if counter == 10 {
            break counter * 2;
        }
    };

    println!("çµæœç‚ºï¼š{}", result);
}
```

#### ä½¿ç”¨ while åšæ¢ä»¶è¿´åœˆ

åœ¨ç¨‹å¼ä¸­ç”¨æ¢ä»¶åˆ¤æ–·è¿´åœˆçš„åŸ·è¡Œé€šå¸¸æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚ç•¶æ¢ä»¶ç‚ºçœŸæ™‚ï¼Œè¿´åœˆå°±ç¹¼çºŒåŸ·è¡Œã€‚ç•¶æ¢ä»¶ä¸å†ç¬¦åˆæ™‚ï¼Œç¨‹å¼å°±ç”¨ break åœæ­¢è¿´åœˆã€‚é€™æ¨£çš„å¾ªç’°è¡Œç‚ºå¯ä»¥ç”¨ `loop`ã€`if`ã€`else` å’Œ `break` çµ„åˆå‡ºä¾†ã€‚ä½†æ˜¯é€™ç¨®æ¨¡å¼éå¸¸å¸¸è¦‹ï¼Œæ‰€ä»¥ Rust æœ‰æä¾›å…§å»ºçš„çµæ§‹ç¨±ç‚º `while` è¿´åœˆã€‚

```RS
fn main() {
    let mut number = 3;

    while number != 0 {
        println!("{}!", number);

        number -= 1;
    }

    println!("å‡ç©ºï¼ï¼ï¼");
}
```

#### ä½¿ç”¨ for éæ­·é›†åˆ

å¯ä»¥ä½¿ç”¨ `for` è¿´åœˆä¾†å°é›†åˆçš„æ¯å€‹å…ƒç´ åŸ·è¡Œä¸€äº›ç¨‹å¼ç¢¼ã€‚

```RS
fn main() {
    let a = [10, 20, 30, 40, 50];

    for element in a {
        println!("æ•¸å€¼ç‚ºï¼š{}", element);
    }
}
```

`for` è¿´åœˆçš„å®‰å…¨æ€§èˆ‡ç°¡æ½”ç¨‹åº¦è®“å®ƒæˆç‚º Rust æœ€å¸¸è¢«ä½¿ç”¨çš„è¿´åœˆçµæ§‹ã€‚å°±ç®—ä½ æƒ³åŸ·è¡Œçš„æ˜¯ä¾ç…§æ¬¡æ•¸å¾ªç’°çš„ç¨‹å¼ç¢¼ï¼Œå¤šæ•¸ Rustaceans é‚„æ˜¯æœƒé¸æ“‡ `for` è¿´åœˆã€‚è¦é€™éº¼åšçš„æ–¹æ³•æ˜¯ä½¿ç”¨ `Range`ï¼Œé€™æ˜¯æ¨™æº–å‡½å¼åº«æä¾›çš„å‹åˆ¥ï¼Œç”¨ä¾†ç”¢ç”Ÿä¸€é€£ä¸²çš„æ•¸å­—åºåˆ—ï¼Œå¾æŒ‡å®šä¸€å€‹æ•¸å­—é–‹å§‹ä¸€ç›´åˆ°å¦ä¸€å€‹æ•¸å­—ä¹‹å‰çµæŸã€‚

```RS
fn main() {
    for number in (1..4).rev() {
        println!("{}!", number);
    }
    println!("å‡ç©ºï¼ï¼ï¼");
}
```

## åƒè€ƒè³‡æ–™

- [The Rust Programming Language](https://doc.rust-lang.org/stable/book/)
