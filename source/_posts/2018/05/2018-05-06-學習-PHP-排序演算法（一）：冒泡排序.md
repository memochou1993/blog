---
title: 學習 PHP 排序演算法（一）：冒泡排序
permalink: 學習-PHP-排序演算法（一）：冒泡排序
date: 2018-05-06 10:19:59
tags: ["程式寫作", "PHP", "演算法"]
categories: ["程式寫作", "PHP", "演算法"]
---

## 前言

筆試時考到排序演算法，雖然有想到冒泡排序法，卻沒能在當下寫出來。

## 做法

重複地走訪要排序的數列，相鄰比較兩個元素，再根據條件進行交換。

## 實作

原始陣列。

```PHP
$arr = [5, 4, 3, 2, 1];
```

先試著做一次相鄰比較並交換値的迴圈。

```PHP
for ($j = 1; $j < count($arr); $j++) {
    if ($arr[$j - 1] > $arr[$j]) {
        $temp = $arr[$j - 1];
        $arr[$j - 1] = $arr[$j];
        $arr[$j] = $temp;
    }
}
```

輸出：

```PHP
Array ( [0] => 4 [1] => 5 [2] => 3 [3] => 2 [4] => 1 )
Array ( [0] => 4 [1] => 3 [2] => 5 [3] => 2 [4] => 1 )
Array ( [0] => 4 [1] => 3 [2] => 2 [3] => 5 [4] => 1 )
Array ( [0] => 4 [1] => 3 [2] => 2 [3] => 1 [4] => 5 )
```

經過 4 次相鄰比較後，把 `5` 挪到最後面了。

這樣的迴圈重複做 4 遍可以得到：

```PHP
Array ( [0] => 4 [1] => 5 [2] => 3 [3] => 2 [4] => 1 )
Array ( [0] => 4 [1] => 3 [2] => 5 [3] => 2 [4] => 1 )
Array ( [0] => 4 [1] => 3 [2] => 2 [3] => 5 [4] => 1 )
Array ( [0] => 4 [1] => 3 [2] => 2 [3] => 1 [4] => 5 )

Array ( [0] => 3 [1] => 4 [2] => 2 [3] => 1 [4] => 5 )
Array ( [0] => 3 [1] => 2 [2] => 4 [3] => 1 [4] => 5 )
Array ( [0] => 3 [1] => 2 [2] => 1 [3] => 4 [4] => 5 )
Array ( [0] => 3 [1] => 2 [2] => 1 [3] => 4 [4] => 5 )

Array ( [0] => 2 [1] => 3 [2] => 1 [3] => 4 [4] => 5 )
Array ( [0] => 2 [1] => 1 [2] => 3 [3] => 4 [4] => 5 )
Array ( [0] => 2 [1] => 1 [2] => 3 [3] => 4 [4] => 5 )
Array ( [0] => 2 [1] => 1 [2] => 3 [3] => 4 [4] => 5 )

Array ( [0] => 1 [1] => 2 [2] => 3 [3] => 4 [4] => 5 )
Array ( [0] => 1 [1] => 2 [2] => 3 [3] => 4 [4] => 5 )
Array ( [0] => 1 [1] => 2 [2] => 3 [3] => 4 [4] => 5 )
Array ( [0] => 1 [1] => 2 [2] => 3 [3] => 4 [4] => 5 )
```

但會發現，後面已經排序過的部分不需要再排序，因此可以改良為：

```PHP
function bubble_sort($arr) {
    for ($k = 1; $k < count($arr); $k++) {
        for ($l = 1; $l <= count($arr) - $k; $l++) {
            if ($arr[$l - 1] > $arr[$l]) {
                $temp = $arr[$l - 1];
                $arr[$l - 1] = $arr[$l];
                $arr[$l] = $temp;
            }
        }
    }
    return $arr;
}
```

輸出得到：

```PHP
Array ( [0] => 4 [1] => 5 [2] => 3 [3] => 2 [4] => 1 )
Array ( [0] => 4 [1] => 3 [2] => 5 [3] => 2 [4] => 1 )
Array ( [0] => 4 [1] => 3 [2] => 2 [3] => 5 [4] => 1 )
Array ( [0] => 4 [1] => 3 [2] => 2 [3] => 1 [4] => 5 )

Array ( [0] => 3 [1] => 4 [2] => 2 [3] => 1 [4] => 5 )
Array ( [0] => 3 [1] => 2 [2] => 4 [3] => 1 [4] => 5 )
Array ( [0] => 3 [1] => 2 [2] => 1 [3] => 4 [4] => 5 )

Array ( [0] => 2 [1] => 3 [2] => 1 [3] => 4 [4] => 5 )
Array ( [0] => 2 [1] => 1 [2] => 3 [3] => 4 [4] => 5 )

Array ( [0] => 1 [1] => 2 [2] => 3 [3] => 4 [4] => 5 )
```

## 程式碼

<script src="https://gist.github.com/memochou1993/dcbfc65632efe39a64b39a46189bd917.js"></script>
