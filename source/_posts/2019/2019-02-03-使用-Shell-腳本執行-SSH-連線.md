---
title: 使用 Shell 腳本執行 SSH 連線
permalink: 使用-Shell-腳本執行-SSH-連線
date: 2019-02-03 02:22:43
tags: ["程式寫作", "Shell", "命令列工具"]
categories: ["程式寫作", "Shell", "命令列工具"]
---

## 前言
以連線到 AWS 的 EC2 執行個體為例。

## 做法
新增 `~/ec2.sh` 檔：
```BASH
#!/bin/bash

# 金鑰位置
key="~/.ssh/aws.pem"

# 執行個體一
  ip[1]=xx.xxx.xxx.xxx
user[1]=ubuntu

# 執行個體二
  ip[2]=yy.yyy.yyy.yyy
user[2]=ubuntu

for ((i=1; i <= ${#ip[@]}; i++))
do
    echo "${i})" ${ip[$i]}
done

# 讀取輸入
read input

# 執行連線
ssh -i "~/.ssh/aws.pem" "${user[$input]}@${ip[$input]}"

# 結束
exit 0
```

執行。
```
$ sh ~/ec2.sh
1) xx.xxx.xxx.xxx
2) yy.yyy.yyy.yyy
```